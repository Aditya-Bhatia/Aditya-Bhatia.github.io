<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EEC 172 Final Project - CC3200 Security System</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --text-color: #333;
            --background-color: #f8f9fa;
            --code-background: #f1f1f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 8px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: white;
        }

        h2 {
            color: var(--primary-color);
            margin: 30px 0 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
        }

        h3 {
            color: var(--primary-color);
            margin: 25px 0 10px;
        }

        p {
            margin-bottom: 15px;
        }

        .authors {
            margin: 20px 0;
            font-style: italic;
        }

        .author {
            margin: 5px 0;
        }

        .section {
            background: white;
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        code {
            background-color: var(--code-background);
            padding: 2px 4px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
        }

        .pinout {
            background-color: var(--code-background);
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .pinout h4 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        a {
            color: var(--secondary-color);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <header>
        <h1>EEC 172 Final Project</h1>
        <h2 style="color: white; border-bottom: none;">CC3200 Security System/Alarm</h2>
        <div class="authors">
            <div class="author">Hanna Shui - Computer Engineering, UC Davis</div>
            <div class="author">Aditya Bhatia - Computer Science and Engineering, UC Davis</div>
        </div>
    </header>

    <div class="section">
        <h2>Implementation</h2>
        <h3>Brief Overview</h3>
        <p>The project involves connecting the CC3200 board with a PIR motion sensor, an AS608 Fingerprint sensor, the Adafruit OLED, a buzzer, the IR receiver, and AWS to send a receive updates from Discord and email. The system has 4 main alarm states that are displayed on the OLED and can be swapped between by using the AT&T remote + IR Receiver or by sending signals using Discord slash commands.</p>

        <h3>Alarm States</h3>
        <p>The alarm has a total of 4 states that the user can switch between, and is offered various ways to switch between them.</p>

        <h4>Alarm Off State</h4>
        <p>The program starts in the default state, which is the alarm off state. In this state, the OLED displays the "Alarm Off" banner in green along with the message to press the mute key on the remote to turn the alarm on...</p>

        <h4>Alarm On State</h4>
        <p>When entering the Alarm On state, the OLED screen displays "Alarm On" in red and the text telling the user that they can press mute to disable the alarm...</p>

        <h4>Alarm Triggered State</h4>
        <p>In this state, the OLED displays "Triggered!" in red, and both the Red LED and buzzer are constantly pulsing...</p>

        <h4>Password Change or New Fingerprint State</h4>
        <p>When the user is in the base Alarm Off state, pressing SW3 will bring up a prompt that asks them to either enter '0' to change the password or enter a number from 1-9...</p>

        <h3>Hardware Components</h3>
        
        <h4>The OLED Screen</h4>
        <div class="pinout">
            <h5>Pinout</h5>
            <p>MOSI (Data): Pin 7 (SPI MOSI)<br>
            SCLK (Clock): Pin 5 (SPI CLK)<br>
            DC (Data/Command): GPIO Pin 53<br>
            CS (Chip Select): GPIO Pin 15<br>
            RST (Reset): GPIO Pin 18<br>
            VCC/GND: Connected to 3.3V and GND, respectively</p>
        </div>

        <h4>The IR Sensor + Remote</h4>
        <div class="pinout">
            <h5>Pinout</h5>
            <p>OUT: GPIO 3 (IR Receiver output)<br>
            VCC/GND: Connected to 3.3V and GND, respectively</p>
        </div>

        <h4>The PIR Sensor</h4>
        <div class="pinout">
            <h5>Pinout</h5>
            <p>OUT: GPIO Pin 62 (PIR digital signal)<br>
            VCC/GND: Connected to 5V and GND, respectively</p>
        </div>

        <h4>The Buzzer</h4>
        <div class="pinout">
            <h5>Pinout</h5>
            <p>Signal (+): Timer A0 PWM output (GPIO Pin 17)<br>
            GND: Connected to GND</p>
        </div>

        <h4>The Fingerprint Sensor</h4>
        <div class="pinout">
            <h5>Pinout</h5>
            <p>TX: Connected to UART1 RX (Pin 02)<br>
            RX: Connected to UART1 TX (Pin 01)<br>
            VCC/GND: Connected to 5V and GND, respectively</p>
        </div>

        <h3>Communication with AWS</h3>
        <h4>Get Request</h4>
        <p>The system sends periodic HTTP GET requests to AWS IoT to fetch the current shadow state of the device...</p>

        <h4>Post Request</h4>
        <p>Whenever the alarm state changes (e.g., from Off to On, On to Triggered, etc.) or when the password is changed, the system sends an HTTP POST to the AWS IoT endpoint...</p>

        <h3>Discord Communication</h3>
        <h4>Messaging Lambda</h4>
        <p>An SNS topic is set up so that it triggers an AWS Lambda function whenever the shadow state changes...</p>

        <h4>Slash Commands</h4>
        <p>Configuring a slash command is a bit more complicated. It first involves creating a public bot for your account using the Discord Developer Portal...</p>
    </div>

    <div class="section">
        <h2>Challenges</h2>
        <h3>1. Unusability of the RC522 RFID sensor</h3>
        <p>We had initially planned for the user to be able to disable the alarm using an NFC tag or card that they would tap against an RC522 RFID sensor...</p>

        <h3>2. Small issues with the Adafruit Fingerprint Sensor library</h3>
        <p>In the example code provided by Adafruit for enrolling and reading a fingerprint, the code called for the fingerprint sensor to first take an image of the fingerprint...</p>

        <h3>3. Inconsistent behavior of the PIR sensor with the CC3200 board</h3>
        <p>We have a GPIO interrupt enabled to detect when the data pin of the sensor goes high when it detects movement...</p>
    </div>

    <div class="section">
        <h2>Future Work</h2>
        <h3>1. Complete the timer stretch goal</h3>
        <p>The timer slash command is set up in Discord and posts to the shadow, but there is no code to handle it...</p>

        <h3>2. Presence detector instead of a Motion sensor</h3>
        <p>We could make it so that we use a 24GHz mm wave motion + presence detector instead of a PIR sensor...</p>

        <h3>3. Store fingerprints in DynamoDB</h3>
        <p>This feature is not that important. The fingerprint module only allows for the bitmap images of the fingerprint to be exported...</p>

        <h3>4. Remove fingerprint option</h3>
        <p>Currently, the code does not allow the user to remove a fingerprint from the sensor, they can only overwrite an existing fingerprint...</p>

        <h3>5. Use Discord slash command to change password</h3>
        <p>It would be beneficial for the user to be able to change the password of the alarm using a slash command on Discord...</p>
    </div>
</body>
</html>
